<nav class="navbar app-navbar">
  <div class="container-fluid d-flex align-items-center">
    <!-- BOTÓN MENÚ (solo mobile) -->
    <button mat-icon-button *ngIf="isMobile" (click)="toggleMenu()">
      <mat-icon>menu</mat-icon>
    </button>

    <!-- LOGO -->
    <a class="navbar-brand ms-2" routerLink="/">
      <img class="logo" src="assets/img/small_logo.png" alt="Logo" />
      Palex
    </a>

    <span class="flex-grow-1"></span>

    <!-- TEMA -->
    <button mat-icon-button (click)="toggleTheme()">
      <mat-icon>{{ isDarkMode ? "light_mode" : "dark_mode" }}</mat-icon>
    </button>

    <!-- USUARIO -->
    <ng-container *ngIf="isLoggedIn$ | async; else loginBtn">
      <button mat-icon-button [matMenuTriggerFor]="userMenu">
        <mat-icon>account_circle</mat-icon>
      </button>
    </ng-container>

    <ng-template #loginBtn>
      <app-add-button label="Acceder" icon="login" (onClick)="loginDialog()" />
    </ng-template>
  </div>
</nav>

<mat-menu #userMenu="matMenu">
  <button mat-menu-item routerLink="/users/profile">
    <mat-icon>person</mat-icon>
    Perfil
  </button>

  <button mat-menu-item (click)="logOut()">
    <mat-icon>logout</mat-icon>
    Cerrar sesión
  </button>
</mat-menu>
