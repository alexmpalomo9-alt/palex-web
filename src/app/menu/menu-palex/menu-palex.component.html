<mat-sidenav-container class="sidenav-container">
  <mat-sidenav-content>
    <div class="menu-container">
      <!-- Header -->
      <div class="header-menu">
        <div class="title-container">
          <h1 class="title">üçΩÔ∏è Nuestra Carta</h1>

          <p class="subtitle">
            {{ restaurant?.name || "Bienvenido a nuestro men√∫" }}
          </p>

          <p class="subtitle">
            {{ restaurant?.description || "Mira nuestras opciones" }}
          </p>
        </div>
      </div>

      <!-- Tabs -->
      <mat-tab-group mat-stretch-tabs="true">
        <!-- OFERTAS -->
        <mat-tab label="üî• Ofertas">
          <ng-container *ngIf="offerProducts$ | async as offerProducts">
            <div class="grid" *ngIf="offerProducts.length > 0; else emptyOffer">
              <mat-card
                class="menu-card"
                *ngFor="let item of offerProducts"
                [class.offer]="item.isOffer"
              >
                <div class="card-content-wrapper">
                  <!-- Imagen -->
                  <div class="image-section">
                    <img
                      mat-card-image
                      [src]="item.imageUrl || 'assets/img/not-found.png'"
                      alt="{{ item.name }}"
                      (click)="onOpenImage(item.imageUrl)"
                      (error)="onImageError($event)"
                    />
                  </div>

                  <!-- Info -->
                  <div class="text-section">
                    <h2>{{ item.name }}</h2>
                    <p>{{ item.description }}</p>

                    <div class="price-wrapper">
                      <ng-container *ngIf="item.isOffer; else priceNormalOffer">
                        <span class="old-price">{{
                          item.price | currency
                        }}</span>
                        <span class="offer-price">{{
                          item.offerPrice | currency
                        }}</span>
                      </ng-container>

                      <ng-template #priceNormalOffer>
                        <span class="price-normal">{{
                          item.price | currency
                        }}</span>
                      </ng-template>
                    </div>

                    <div class="button-wrapper">
                      <button
                        mat-raised-button
                        color="primary"
                        (click)="onAddProduct(item)"
                      >
                        A√±adir üõí
                      </button>
                    </div>
                  </div>
                </div>
              </mat-card>
            </div>

            <ng-template #emptyOffer>
              <div class="empty-message">No hay ofertas disponibles.</div>
            </ng-template>
          </ng-container>
        </mat-tab>

        <!-- CATEGOR√çAS -->
        <mat-tab *ngFor="let category of categories" [label]="category.label">
          <ng-container *ngIf="category.products$ | async as products">
            <div class="grid" *ngIf="products.length > 0; else emptyCategory">
              <mat-card
                class="menu-card"
                *ngFor="let item of products"
                [class.offer]="item.isOffer"
              >
                <div class="card-content-wrapper">
                  <!-- Imagen -->
                  <div class="image-section">
                    <img
                      mat-card-image
                      [src]="item.imageUrl || 'assets/img/not-found.png'"
                      alt="{{ item.name }}"
                      (click)="onOpenImage(item.imageUrl)"
                      (error)="onImageError($event)"
                    />
                  </div>

                  <!-- Info -->
                  <div class="text-section">
                    <h2>{{ item.name }}</h2>
                    <p>{{ item.description }}</p>

                    <div class="price-wrapper">
                      <ng-container *ngIf="item.isOffer; else priceNormalCat">
                        <span class="old-price">{{
                          item.price | currency
                        }}</span>
                        <span class="offer-price">{{
                          item.offerPrice | currency
                        }}</span>
                      </ng-container>

                      <ng-template #priceNormalCat>
                        <span class="price-normal">{{
                          item.price | currency
                        }}</span>
                      </ng-template>
                    </div>

                    <div class="button-wrapper">
                      <button
                        mat-raised-button
                        color="primary"
                        (click)="onAddProduct(item)"
                      >
                        A√±adir üõí
                      </button>
                    </div>
                  </div>
                </div>
              </mat-card>
            </div>

            <ng-template #emptyCategory>
              <div class="empty-message">No hay productos disponibles.</div>
            </ng-template>
          </ng-container>
        </mat-tab>
      </mat-tab-group>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
