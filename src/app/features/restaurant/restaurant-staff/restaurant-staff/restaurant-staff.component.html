<mat-card class="staff-card shadow-sm" [class.dark-theme]="isDarkMode">

  <!-- HEADER STICKY -->
  <div class="staff-header sticky-header">

    <div class="staff-info">

      <!-- Ícono -->
      <div class="staff-icon">
        <mat-icon color="primary">groups</mat-icon>
      </div>

      <!-- Títulos -->
      <div class="staff-texts">
        <h2 class="staff-title">Personal del Restaurante</h2>
        <p class="staff-subtitle">
          Administra los empleados, roles y permisos del restaurante.
        </p>
      </div>

    </div>

    <!-- Botón invitar -->
    <button
      mat-flat-button
      color="primary"
      class="invite-btn pulse"
      (click)="openInvitationDialog()"
    >
      <mat-icon>person_add_alt</mat-icon>
      Invitar empleado
    </button>

  </div>

  <mat-divider></mat-divider>

  <!-- ROLES TEMPLATE -->
  <ng-template #rolesTemplate let-user>
    <mat-chip-set class="mt-2">
      <mat-chip
        *ngFor="let r of user.rolesList"
        color="primary"
        selected
        class="chip-role"
      >
        {{ r }}
      </mat-chip>
    </mat-chip-set>
  </ng-template>

  <!-- TABLA -->
  <div class="table-container mt-3">
    <app-base-table
      [columns]="columns"
      [data]="staff"
      [actionsTemplate]="actionsTemplate"
      filterPlaceholder="Buscar empleado..."
    ></app-base-table>
  </div>

  <!-- ACCIONES -->
  <ng-template #actionsTemplate let-user>
    <div class="actions d-flex align-items-center gap-2">
      <button
        mat-icon-button
        matTooltip="Cambiar rol"
        color="primary"
        (click)="changeRole(user)"
      >
        <mat-icon>manage_accounts</mat-icon>
      </button>

      <button
        mat-icon-button
        matTooltip="Eliminar del restaurante"
        color="warn"
        (click)="deleteStaffMember(user)"
      >
        <mat-icon>person_remove</mat-icon>
      </button>
    </div>
  </ng-template>

  <mat-divider class="my-4"></mat-divider>

  <!-- ROLES Y PERMISOS -->
  <app-role-permissions-info></app-role-permissions-info>
</mat-card>
